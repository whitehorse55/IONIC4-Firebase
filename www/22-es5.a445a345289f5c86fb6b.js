(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"1m1N":function(l,n,e){"use strict";e.r(n);var t=e("CcnG"),i=e("mrSG"),u=e("ZZ/e"),o=e("gIcY"),s=e("y24p"),r=e("t8sF"),a=e("Pn9U"),c=e("t4gJ"),p=e("jfHL"),b=e("iqUP"),g=function(){function l(l,n,e,t,i,u,o,s,r,a,c,p){this.crop=l,this.file=n,this.camera=e,this.navCtrl=t,this.formBuilder=i,this.toastCtrl=u,this.alertCtrl=o,this.loadingCtrl=s,this.afs=r,this.af=a,this.offerService=c,this.userService=p,this.defaultImage="assets/img/frame.png",this.isLoading=!1,this.imagePickerOptions={maximumImagesCount:1,quality:50},this.validationMessages={description:[{type:"required",message:"Description is required."},{type:"maxlength",message:"Description must be upto 150 characters long."}]}}return l.prototype.ngOnInit=function(){this.newOfferForm=this.formBuilder.group({description:[null,o.l.compose([o.l.required,o.l.maxLength(150)])]}),this.imageResponse=[],this.sectorsarray=[],this.selectedSectors=[],this.uploadedFiles=[],this.generateSectorsArray()},l.prototype.generateSectorsArray=function(){for(var l=0;l<17;l++)this.sectorsarray.push("sector"+l)},l.prototype.clickSector=function(l){this.selectedSectors.includes(l)?this.selectedSectors.splice(this.selectedSectors.indexOf(l),1):this.selectedSectors.push(l)},l.prototype.takePicture=function(){var l=this;this.imageResponse.length>=3?this.showToast():this.camera.getPicture({quality:50,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(function(n){l.cropImage(n)})},l.prototype.showToast=function(){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(l){switch(l.label){case 0:return[4,this.toastCtrl.create({showCloseButton:!1,message:"Image can add upto 3",duration:3e3,position:"bottom"})];case 1:return l.sent().present(),[2]}})})},l.prototype.getImages=function(){var l=this;this.imageResponse.length>=3?this.showToast():this.camera.getPicture({quality:50,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,sourceType:this.camera.PictureSourceType.PHOTOLIBRARY}).then(function(n){l.cropImage(n)})},l.prototype.cropImage=function(l){var n=this;this.crop.crop(l,{targetHeight:180,targetWidth:240,quality:50}).then(function(l){n.showCroppedImage(l.split("?")[0])},function(l){alert("Error cropping image"+l)})},l.prototype.showCroppedImage=function(l){var n=this;this.isLoading=!0;var e=l.split("/"),t=e[e.length-1],i=l.split(t)[0];this.file.readAsDataURL(i,t).then(function(l){n.imageResponse.push(l),n.isLoading=!1},function(l){alert("Error in showing image"+l),n.isLoading=!1})},l.prototype.removeImage=function(l){this.imageResponse.splice(l-1,1)},l.prototype.offerPublish=function(){this.uploadImage()},l.prototype.uploadImage=function(){var l=this;this.loadingCtrl.create({message:"Please wait..."}).then(function(l){l.present(),l.onDidDismiss().then(function(l){console.log("Loading dismissed!")})});for(var n=function(n){var t="offer/"+n+(new Date).getTime()+".jpg",u=e.afs.ref(t);console.log(e.imageResponse[n]),u.putString(e.imageResponse[n],"data_url").then(function(){u.getDownloadURL().subscribe(function(n){l.uploadedFiles.push(n),l.uploadedFiles.length===l.imageResponse.length&&l.doPublish()})}).catch(function(n){return i.__awaiter(l,void 0,void 0,function(){return i.__generator(this,function(l){switch(l.label){case 0:return console.log(n),[4,this.toastCtrl.create({showCloseButton:!0,message:n,duration:3e3,position:"bottom"})];case 1:return l.sent().present(),[2]}})})})},e=this,t=0;t<this.imageResponse.length;t++)n(t)},l.prototype.doPublish=function(){var l=this,n=this.userService.getAuthUser().uid;this.userService.getUser(n).subscribe(function(n){l.newOffer={companyId:n.id,companyName:n.name,companyAvatar:n.avatar,description:l.newOfferForm.value.description,media:l.uploadedFiles,sectors:l.selectedSectors,timestamp:b.firestore.FieldValue.serverTimestamp()},l.offerService.addOffer(l.newOffer),l.loadingCtrl.dismiss(),l.navCtrl.pop()})},l}(),m=function(){return function(){}}(),d=e("pMnS"),h=e("Ip0R"),f=e("oBZk"),k=e("VRER"),v=e("fvl4"),y=t.rb({encapsulation:0,styles:[["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--background:linear-gradient(135deg, var(--ion-color-primary-contrast), var(--ion-color-primary))}ion-item[_ngcontent-%COMP%]{border-radius:5px;margin-top:10px;margin-left:20px;margin-right:20px}ion-item[_ngcontent-%COMP%]:first-child{margin-top:5vh}ion-item.item[_ngcontent-%COMP%]{background-color:rgba(255,255,255,.4);margin-bottom:1px}ion-item.item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:10%;color:rgba(0,0,0,.6);font-size:1.2em}.image-picker[_ngcontent-%COMP%]{margin-bottom:20px}.image-picker[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{display:-webkit-inline-box;display:inline-flex;margin:20px 20px 10px}.image-picker[_ngcontent-%COMP%]   ion-fab-button[_ngcontent-%COMP%]{width:30px;height:30px;margin-top:-4px}.image-picker[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.image-picker[_ngcontent-%COMP%]   .remove-media[_ngcontent-%COMP%]{position:absolute;right:5px;top:0;width:50px;height:50px}.sector-selector[_ngcontent-%COMP%]{position:absolute;right:10px;top:0;width:30px}.sector-picker[_ngcontent-%COMP%]{margin-top:20px}.sector-picker[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:20px;margin-right:20px}#publishBtn[_ngcontent-%COMP%]{margin:20px 20px 50px}.validation-errors[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px;color:#fff}"]],data:{}});function C(l){return t.Kb(0,[(l()(),t.tb(0,0,null,null,1,"div",[["class","error-message"]],null,null,null,null,null)),(l()(),t.Jb(1,null,[" "," "]))],null,function(l,n){l(n,1,0,n.parent.context.$implicit.message)})}function z(l){return t.Kb(0,[(l()(),t.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),t.ib(16777216,null,null,1,null,C)),t.sb(2,16384,null,0,h.i,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.ib(0,null,null,0))],function(l,n){var e=n.component;l(n,2,0,e.newOfferForm.get("description").hasError(n.context.$implicit.type)&&(e.newOfferForm.get("description").dirty||e.newOfferForm.get("description").touched))},null)}function O(l){return t.Kb(0,[(l()(),t.tb(0,0,null,null,1,"ion-icon",[["class","sector-selector"],["ios","ios-checkmark-circle"],["md","md-checkmark-circle"],["slot","icon-only"]],null,null,null,f.S,f.n)),t.sb(1,49152,null,0,u.B,[t.h,t.k,t.z],{ios:[0,"ios"],md:[1,"md"]},null)],function(l,n){l(n,1,0,"ios-checkmark-circle","md-checkmark-circle")},null)}function P(l){return t.Kb(0,[(l()(),t.tb(0,0,null,null,6,"ion-col",[["size","4"]],null,null,null,f.N,f.i)),t.sb(1,49152,null,0,u.s,[t.h,t.k,t.z],{size:[0,"size"]},null),(l()(),t.tb(2,0,null,0,4,"ion-button",[["expand","fill"],["fill","clear"],["size","large"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.clickSector(l.context.$implicit)&&t),t},f.J,f.e)),t.sb(3,49152,null,0,u.j,[t.h,t.k,t.z],{expand:[0,"expand"],fill:[1,"fill"],size:[2,"size"]},null),(l()(),t.tb(4,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(l()(),t.ib(16777216,null,0,1,null,O)),t.sb(6,16384,null,0,h.i,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(l,n){var e=n.component;l(n,1,0,"4"),l(n,3,0,"fill","clear","large"),l(n,6,0,e.selectedSectors.includes(n.context.$implicit))},function(l,n){l(n,4,0,t.xb(1,"assets/img/",n.context.$implicit,".png"))})}function x(l){return t.Kb(0,[(l()(),t.tb(0,0,null,null,1,"ion-icon",[["class","remove-media"],["name","trash"],["slot","icon-only"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.removeImage(1)&&t),t},f.S,f.n)),t.sb(1,49152,null,0,u.B,[t.h,t.k,t.z],{name:[0,"name"]},null)],function(l,n){l(n,1,0,"trash")},null)}function w(l){return t.Kb(0,[(l()(),t.tb(0,0,null,null,1,"ion-icon",[["class","remove-media"],["name","trash"],["slot","icon-only"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.removeImage(2)&&t),t},f.S,f.n)),t.sb(1,49152,null,0,u.B,[t.h,t.k,t.z],{name:[0,"name"]},null)],function(l,n){l(n,1,0,"trash")},null)}function I(l){return t.Kb(0,[(l()(),t.tb(0,0,null,null,1,"ion-icon",[["class","remove-media"],["name","trash"],["slot","icon-only"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.removeImage(3)&&t),t},f.S,f.n)),t.sb(1,49152,null,0,u.B,[t.h,t.k,t.z],{name:[0,"name"]},null)],function(l,n){l(n,1,0,"trash")},null)}function F(l){return t.Kb(0,[(l()(),t.tb(0,0,null,null,11,"ion-header",[],null,null,null,f.R,f.m)),t.sb(1,49152,null,0,u.A,[t.h,t.k,t.z],null,null),(l()(),t.tb(2,0,null,0,9,"ion-toolbar",[],null,null,null,f.jb,f.E)),t.sb(3,49152,null,0,u.Ab,[t.h,t.k,t.z],null,null),(l()(),t.tb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,f.K,f.f)),t.sb(5,49152,null,0,u.k,[t.h,t.k,t.z],null,null),(l()(),t.tb(6,0,null,0,2,"ion-back-button",[["defaultHref","/home/newOffers"]],null,[[null,"click"]],function(l,n,e){var i=!0;return"click"===n&&(i=!1!==t.Fb(l,8).onClick(e)&&i),i},f.H,f.c)),t.sb(7,49152,null,0,u.f,[t.h,t.k,t.z],{defaultHref:[0,"defaultHref"]},null),t.sb(8,16384,null,0,u.g,[[2,u.gb],u.Hb],{defaultHref:[0,"defaultHref"]},null),(l()(),t.tb(9,0,null,0,2,"ion-title",[],null,null,null,f.ib,f.D)),t.sb(10,49152,null,0,u.yb,[t.h,t.k,t.z],null,null),(l()(),t.Jb(-1,0,["Offer Publications"])),(l()(),t.tb(12,0,null,null,68,"ion-content",[["id","offerpublication"]],null,null,null,f.O,f.j)),t.sb(13,49152,null,0,u.t,[t.h,t.k,t.z],null,null),(l()(),t.tb(14,0,null,0,66,"form",[["class","list-form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,e){var i=!0,u=l.component;return"submit"===n&&(i=!1!==t.Fb(l,16).onSubmit(e)&&i),"reset"===n&&(i=!1!==t.Fb(l,16).onReset()&&i),"ngSubmit"===n&&(i=!1!==u.offerPublish()&&i),i},null,null)),t.sb(15,16384,null,0,o.p,[],null,null),t.sb(16,540672,null,0,o.d,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t.Gb(2048,null,o.a,null,[o.d]),t.sb(18,16384,null,0,o.i,[[4,o.a]],null,null),(l()(),t.tb(19,0,null,null,8,"ion-item",[["no-padding",""]],null,null,null,f.V,f.q)),t.sb(20,49152,null,0,u.G,[t.h,t.k,t.z],null,null),(l()(),t.tb(21,0,null,0,6,"ion-textarea",[["formControlName","description"],["item-end",""],["placeholder","Description (name of product, price, offer price, etc.)"],["row","5"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(l,n,e){var i=!0;return"ionBlur"===n&&(i=!1!==t.Fb(l,22)._handleBlurEvent(e.target)&&i),"ionChange"===n&&(i=!1!==t.Fb(l,22)._handleInputEvent(e.target)&&i),i},f.hb,f.C)),t.sb(22,16384,null,0,u.Mb,[t.k],null,null),t.Gb(1024,null,o.f,function(l){return[l]},[u.Mb]),t.sb(24,671744,null,0,o.c,[[3,o.a],[8,null],[8,null],[6,o.f],[2,o.o]],{name:[0,"name"]},null),t.Gb(2048,null,o.g,null,[o.c]),t.sb(26,16384,null,0,o.h,[[4,o.g]],null,null),t.sb(27,49152,null,0,u.wb,[t.h,t.k,t.z],{placeholder:[0,"placeholder"]},null),(l()(),t.tb(28,0,null,null,2,"div",[["class","validation-errors"]],null,null,null,null,null)),(l()(),t.ib(16777216,null,null,1,null,z)),t.sb(30,278528,null,0,h.h,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null),(l()(),t.tb(31,0,null,null,8,"div",[["class","sector-picker"]],null,null,null,null,null)),(l()(),t.tb(32,0,null,null,1,"label",[],null,null,null,null,null)),(l()(),t.Jb(-1,null,["Select your sectors"])),(l()(),t.tb(34,0,null,null,5,"ion-grid",[],null,null,null,f.Q,f.l)),t.sb(35,49152,null,0,u.z,[t.h,t.k,t.z],null,null),(l()(),t.tb(36,0,null,0,3,"ion-row",[],null,null,null,f.X,f.s)),t.sb(37,49152,null,0,u.hb,[t.h,t.k,t.z],null,null),(l()(),t.ib(16777216,null,0,1,null,P)),t.sb(39,278528,null,0,h.h,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null),(l()(),t.tb(40,0,null,null,35,"div",[["class","image-picker"]],null,null,null,null,null)),(l()(),t.tb(41,0,null,null,9,"div",[],null,null,null,null,null)),(l()(),t.Jb(-1,null,[" Select multimedia to publish "])),(l()(),t.tb(43,0,null,null,3,"ion-fab-button",[["color","primary"],["size","small"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.takePicture()&&t),t},f.P,f.k)),t.sb(44,49152,null,0,u.w,[t.h,t.k,t.z],{color:[0,"color"],size:[1,"size"]},null),(l()(),t.tb(45,0,null,0,1,"ion-icon",[["name","camera"]],null,null,null,f.S,f.n)),t.sb(46,49152,null,0,u.B,[t.h,t.k,t.z],{name:[0,"name"]},null),(l()(),t.tb(47,0,null,null,3,"ion-fab-button",[["color","primary"],["size","small"]],null,[[null,"click"]],function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.getImages()&&t),t},f.P,f.k)),t.sb(48,49152,null,0,u.w,[t.h,t.k,t.z],{color:[0,"color"],size:[1,"size"]},null),(l()(),t.tb(49,0,null,0,1,"ion-icon",[["name","cloud-upload"]],null,null,null,f.S,f.n)),t.sb(50,49152,null,0,u.B,[t.h,t.k,t.z],{name:[0,"name"]},null),(l()(),t.tb(51,0,null,null,24,"ion-grid",[],null,null,null,f.Q,f.l)),t.sb(52,49152,null,0,u.z,[t.h,t.k,t.z],null,null),(l()(),t.tb(53,0,null,0,22,"ion-row",[],null,null,null,f.X,f.s)),t.sb(54,49152,null,0,u.hb,[t.h,t.k,t.z],null,null),(l()(),t.tb(55,0,null,0,6,"ion-col",[["size","4"]],null,null,null,f.N,f.i)),t.sb(56,49152,null,0,u.s,[t.h,t.k,t.z],{size:[0,"size"]},null),(l()(),t.tb(57,0,null,0,4,"div",[["expand","fill"],["fill","clear"],["size","large"]],null,null,null,null,null)),(l()(),t.tb(58,0,null,null,1,"ion-img",[],null,null,null,f.T,f.o)),t.sb(59,49152,null,0,u.C,[t.h,t.k,t.z],{src:[0,"src"]},null),(l()(),t.ib(16777216,null,null,1,null,x)),t.sb(61,16384,null,0,h.i,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.tb(62,0,null,0,6,"ion-col",[["size","4"]],null,null,null,f.N,f.i)),t.sb(63,49152,null,0,u.s,[t.h,t.k,t.z],{size:[0,"size"]},null),(l()(),t.tb(64,0,null,0,4,"div",[["expand","fill"],["fill","clear"],["size","large"]],null,null,null,null,null)),(l()(),t.tb(65,0,null,null,1,"ion-img",[],null,null,null,f.T,f.o)),t.sb(66,49152,null,0,u.C,[t.h,t.k,t.z],{src:[0,"src"]},null),(l()(),t.ib(16777216,null,null,1,null,w)),t.sb(68,16384,null,0,h.i,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.tb(69,0,null,0,6,"ion-col",[["size","4"]],null,null,null,f.N,f.i)),t.sb(70,49152,null,0,u.s,[t.h,t.k,t.z],{size:[0,"size"]},null),(l()(),t.tb(71,0,null,0,4,"div",[["expand","fill"],["fill","clear"],["size","large"]],null,null,null,null,null)),(l()(),t.tb(72,0,null,null,1,"ion-img",[],null,null,null,f.T,f.o)),t.sb(73,49152,null,0,u.C,[t.h,t.k,t.z],{src:[0,"src"]},null),(l()(),t.ib(16777216,null,null,1,null,I)),t.sb(75,16384,null,0,h.i,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.tb(76,0,null,null,4,"ion-button",[["color","dark"],["expand","full"],["icon-left",""],["id","publishBtn"],["shape","round"],["size","medium"],["tappable",""],["type","submit"]],null,null,null,f.J,f.e)),t.sb(77,49152,null,0,u.j,[t.h,t.k,t.z],{color:[0,"color"],disabled:[1,"disabled"],expand:[2,"expand"],shape:[3,"shape"],size:[4,"size"],type:[5,"type"]},null),(l()(),t.tb(78,0,null,0,1,"ion-icon",[["name","cloud-upload"]],null,null,null,f.S,f.n)),t.sb(79,49152,null,0,u.B,[t.h,t.k,t.z],{name:[0,"name"]},null),(l()(),t.Jb(-1,0,[" Publish "]))],function(l,n){var e=n.component;l(n,7,0,"/home/newOffers"),l(n,8,0,"/home/newOffers"),l(n,16,0,e.newOfferForm),l(n,24,0,"description"),l(n,27,0,"Description (name of product, price, offer price, etc.)"),l(n,30,0,e.validationMessages.description),l(n,39,0,e.sectorsarray),l(n,44,0,"primary","small"),l(n,46,0,"camera"),l(n,48,0,"primary","small"),l(n,50,0,"cloud-upload"),l(n,56,0,"4"),l(n,59,0,e.imageResponse.length>0?e.imageResponse[0]:e.defaultImage),l(n,61,0,e.imageResponse.length>0),l(n,63,0,"4"),l(n,66,0,e.imageResponse.length>1?e.imageResponse[1]:e.defaultImage),l(n,68,0,e.imageResponse.length>1),l(n,70,0,"4"),l(n,73,0,e.imageResponse.length>2?e.imageResponse[2]:e.defaultImage),l(n,75,0,e.imageResponse.length>2),l(n,77,0,"dark",!e.newOfferForm.valid,"full","round","medium","submit"),l(n,79,0,"cloud-upload")},function(l,n){l(n,14,0,t.Fb(n,18).ngClassUntouched,t.Fb(n,18).ngClassTouched,t.Fb(n,18).ngClassPristine,t.Fb(n,18).ngClassDirty,t.Fb(n,18).ngClassValid,t.Fb(n,18).ngClassInvalid,t.Fb(n,18).ngClassPending),l(n,21,0,t.Fb(n,26).ngClassUntouched,t.Fb(n,26).ngClassTouched,t.Fb(n,26).ngClassPristine,t.Fb(n,26).ngClassDirty,t.Fb(n,26).ngClassValid,t.Fb(n,26).ngClassInvalid,t.Fb(n,26).ngClassPending)})}function _(l){return t.Kb(0,[(l()(),t.tb(0,0,null,null,1,"app-offerpublication",[],null,null,null,F,y)),t.sb(1,114688,null,0,g,[s.a,r.a,a.a,u.Hb,o.b,u.Nb,u.a,u.Eb,k.a,v.a,c.a,p.a],null,null)],function(l,n){l(n,1,0)},null)}var S=t.pb("app-offerpublication",g,_,{},{},[]),R=e("ZYCi");e.d(n,"OfferpublicationPageModuleNgFactory",function(){return M});var M=t.qb(m,[],function(l){return t.Cb([t.Db(512,t.j,t.bb,[[8,[d.a,S]],[3,t.j],t.x]),t.Db(4608,h.k,h.j,[t.u,[2,h.q]]),t.Db(4608,o.n,o.n,[]),t.Db(4608,u.b,u.b,[t.z,t.g]),t.Db(4608,u.Gb,u.Gb,[u.b,t.j,t.q]),t.Db(4608,u.Jb,u.Jb,[u.b,t.j,t.q]),t.Db(4608,o.b,o.b,[]),t.Db(1073742336,h.b,h.b,[]),t.Db(1073742336,o.m,o.m,[]),t.Db(1073742336,o.e,o.e,[]),t.Db(1073742336,u.Cb,u.Cb,[]),t.Db(1073742336,o.k,o.k,[]),t.Db(1073742336,R.o,R.o,[[2,R.t],[2,R.m]]),t.Db(1073742336,m,m,[]),t.Db(1024,R.k,function(){return[[{path:"",component:g}]]},[])])})}}]);